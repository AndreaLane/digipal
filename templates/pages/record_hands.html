{% extends "pages/record.html" %}
{% load pages_tags mezzanine_tags i18n %}
{% load mezzanine_tags pagination_tags hand_filters %}

{% block meta_title %}Hand: {{ result }}{% endblock %}
{% block record_title %}
    Hand: {{ result }}
    {% include "digipal/admin_edit.html" with instance=result %}
{% endblock %}

{% block record_tabs %}
    <li class="{% if not tabid %}active in{% endif %}">
        <a href="{{ result.get_absolute_url }}" data-target="#data" data-toggle="tab">Information</a></li>
    <li class="{% if tabid = "descriptions" %}active in{% endif %} {% if result.description %}{% else %}disabled{% endif %}">
        <a href="{{ result.get_absolute_url }}descriptions/" data-target="#descriptions" data-toggle="tab">Description</a>
    </li>
    <li class="{% if tabid = "pages" %}active in{% endif %} {% if result.images.count > 0 %}{% else %}disabled{% endif %}">
        <a href="{{ result.get_absolute_url }}pages/" data-target="#pages" data-toggle="tab">Pages ({{ result.images.count }})</a></li>
    <li class="{% if tabid = "graphs" %}active in{% endif %} {% if result.graphs.count > 0 %}{% else %}disabled{% endif %}">
        <a href="{{ result.get_absolute_url }}graphs/" data-target="#graphs" data-toggle="tab">Graphs ({{ result.graphs.count }})</a></li>
{% endblock %}

{% block details %}
    <div class='tabbable'>
        <div id='record-tab-content' class='tab-content'>
            <div class='tab-pane fade {% if not tabid %}active in{% endif %}' id='data'>
                <table class="table table-condensed">
                    <tbody>
                        <tr>
                            <th>Name</th>
                            <td>{{ result.label }}</td>
                        </tr>
                        <tr>
                            <th>Manuscript</th>
                            <td><a href="{{result.item_part.get_absolute_url}}">{{ result.item_part }}</a></td>
                        </tr>
                        <tr>
                            <th>Script</th>
                            <td>
                                {{ result.script }}
                            </td>
                        </tr>
                        <tr>
                            <th>Scribe</th>
                            <td>
                                <a href="{{ result.scribe.get_absolute_url }}">{{ result.scribe }}</a>
                            </td>
                        </tr>
                        <tr>
                            <th>Date</th>
                            <td>
                                {{ result.assigned_date }}
                            </td>
                        </tr>
                        <tr>
                            <th>Place</th>
                            <td>
                                {{ result.assigned_place }}
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class='tab-pane fade {% if tabid = "descriptions" %}active in{% endif %}' id='descriptions'>
                {% if result.description %}
                    <div>
                        {{ result.description|tei }}
                    </div>
                {% else %}
                    {% include "digipal/empty_tab.html" with type="description" %}
                {% endif %}
            </div>

            {% include "pages/tab_images.html" with images=result.images.all full_label=1 %}
            
            {% include "digipal/add_to_collection.html" %}
            
            <div class='tab-pane fade {% if tabid = "graphs" %}active in{% endif %}' id='graphs'>
                <div class="scribe annotations">
                    {% include "digipal/annotations.html" %}
                </div>
            </div>

        </div>
    </div>

{% endblock %}

{% block extra_js %}
<script src='{{ STATIC_URL }}digipal/scripts/drag_to_lightbox.js'></script>
{% endblock %}