{% extends "pages/record.html" %}
{% load pages_tags mezzanine_tags i18n %}
{% load mezzanine_tags pagination_tags %}

{% block record_title %}{{ scribe.name }}{% endblock %}

{% block details %}
{% if request.GET.from_image == "true" %}
<script>
    $(document).ready(function($) {
        $('#data').removeClass('active');
        $('#myTab li[class=active]').removeClass('active');
        $('#myTab li a[href=#pages]').parent().addClass('active')
        $('#pages').addClass('in');
        $('#pages').addClass('active');
    });
</script>
{% endif %}
<div class='tabbable'>
    <div id='myTabContent' class='tab-content'>
        <div class='tab-pane fade active in' id='data'>
            <h3>Location</h3>

            <table class="table table-condensed">
                <tbody>
                    <tr>
                        <th>Name</th>
                        <td>{{ scribe.name }}</td>
                    </tr>
                    <tr>
                        <th>Date</th>
                        <td>{{ scribe.date }}</td>
                    </tr>
                    <tr>
                        <th>Scriptorium</th>
                        <td>{{ scribe.scriptorium }}</td>
                    </tr>
                </tbody>
            </table>
        </div>
            <div class='tab-pane fade' id='hands'>
                <h3>Hands</h3>
                    <div class='row-fluid'>
                        <table class="table table-condensed">
                            <tr>
                                <th>Hand</th>
                            </tr>
                            {% for hand in scribe.hand_set.all %}
                                {% if hand %}
                                    <tr>
                                        <td>{{hand.item_part}}</td>
                                    </tr>
                                {% else %}
                                    <tr>
                                        <td><div class="alert alert-block"><h4>No hands available</h4></div></td>
                                    </tr>
                                {% endif %}
                            {% endfor %}

                        </table>
                    </div>
            
            </div>
            <div class='tab-pane fade' id='pages'>
                <h3>Pages</h3> 
                    <table class='table table-condensed'>
                        <tr>
                            <th>Page</th>
                            <th>Hand</td>
                            <th>Image</th>
                        </tr>
                        {% for hand in scribe.hand_set.all %}
                            {% for page in hand.pages.all %}
                            <tr>
                                <td>
                                    <p><a href='../page/{{ page.id }}/'>{{ page}}</a></p>

                                </td>
                                <td>
                                    <p>{{ hand }}</p>
                                </td>
                                <td style='padding:1%'>
                                    <a class="imageDatabase" href="../page/{{ page.id }}/">
                                        {{ page.thumbnail  }}
                                    </a>
                                </td>
                               
                            </tr>
                            {% endfor %}
                        {% endfor %}
                </table>
            </div>
            <div class='tab-pane fade' id='idiographs'>
                <h3>Idiographs</h3>
                <div id='idiographsView'>
                {% if idiograph_components %}
                    {% for idiograph in idiograph_components.distinct %}
                        <h4><b>Idiograph:</b> {{idiograph}}</h4>
                        <table class='table table-condensed'>
                            <tbody>
                                <tr>
                                    <th>Component</th>
                                    <th>Graph</th>
                                </tr>

                        {% for component_list in idiograph.graph_set.distinct %}
                                {% for component in component_list.graph_components.all %}
                                <tr>
                                    <td>{{component.component}}</td>
                                    <td>{{component.id}}</td>
                                </tr>
                                {% endfor %}
                        {% endfor %}
                            </tbody>
                        </table>
                    {% endfor %}
                {% else %}
                    <div class="alert alert-block">
                        <h4>No Idiographs available</h4>
                    </div>
                {% endif %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}
