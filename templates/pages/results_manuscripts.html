{% extends "pages/databasepage.html" %}
{% load pages_tags mezzanine_tags i18n %}
{% load mezzanine_tags pagination_tags %}
{% block search_results%}
    <table class="simple headersX">
        <tr>
            <th>Index</th>
            <th>Repository</th>
            <th>Shelfmark</th>
            <th>Folio(s)</th>
            <th>Description</th>
            <th>Actions</th>
        </tr>
        {% autopaginate results 9 %}
        {% for result in results %}
        <tr class="{% cycle 'bgColour' '' %}">
            <td>{{ result.historical_item.catalogue_number }}</td>
            <td>{{ result.current_item.repository.name }}</td>
            <td>{{ result.current_item.shelfmark }}</td>
            <td>{{ result.locus }}</td>
            <td>
                {% for desc in result.historical_item.description_set.all %}
                {{ desc.description|truncatewords:15 }} ..
                {% endfor %}
            </td>
            <td>
                <ul class="inline">
                    <li><a class="ctrl edit" href="../admin/hand/itempart/{{ result.id }}">Edit</a></li>

                    <li><a class="ctrl view" href="?terms={{ terms }}&amp;basic_search_type={{ type }}&amp;id={{ result.id }}&amp;amp;record={{ forloop.counter }}">View</a></li>
                </ul>
            </td>
        </tr>
        {% endfor %}
        {% paginate %}
    </table>
{% endblock search_results %}